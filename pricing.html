<!DOCTYPE html>
<html lang="en">
<head>
  <title>Pricing</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
    
    <script>
    
    
    //raid type and #data disks, 3parity disks and # total disks
    var raids={ "raid" : [
              { "raidType": "Raidz1-SingleParity(4+1) Typical SAS" ,
                "DataDisks": 4,
                "ParityDisks": 1,
                "TotalDisks": 5},
              { "raidType": "Raidz1-SingleParity(8+1) Typical SSD" ,
                "DataDisks": 8,
                "ParityDisks": 1,
                "TotalDisks": 9}
              ,
               {"raidType": "Raidz2-DoubleParity(8+2) Typical NLSAS" ,
                "DataDisks": 8,
                "ParityDisks": 2,
                "TotalDisks": 10}
             
            
               ]
               
            
        };


        
       // diskType and their paramters
    
    var disks= {
            "disk": [
                    {"diskType":"NLSAS",
                    "size": 4,
                    "iops": 75,
                    "usableSize": 2.6784,
                    "formFactor":3.5,
                    "rpm": 7200,
                    "zilGroupsRequired": 1,
                    "ReadCacheRequired": 0,
                    "MetaCacheRequired": 0,
                     "RaidType": "Raidz2-DoubleParity(8+2) Typical NLSAS",
                     "JBODType": 90,
                     "maxNumberofDisksPerCluster": 360,
                     "priceOfController": 10350,
                     "priceOfJBOD": 6000,
                     "priceOfDisk": 375,
                     "pricePerTB": 79,
                     "powerPerController": 2500,
                     "powerJBOD": 2500,
                     "rackController": 2,
                     "rackJBOD": 4
                    },

                    
                    
                    {"diskType":"SAS10K",
                    "size": 1.2,
                    "iops": 140,
                    "usableSize": 0.80352,
                    "formFactor":2.5,
                    "rpm": 10000,
                    "zilGroupsRequired": 1,
                    "ReadCacheRequired": 1,
                    "MetaCacheRequired": 1,
                     "RaidType": "Raidz1-SingleParity(4+1) Typical SAS",
                     "JBODType": 72,
                     "maxNumberofDisksPerCluster": 288,
                     "priceOfController": 10350,
                     "priceOfJBOD": 6000,
                     "priceOfDisk": 386,
                     "pricePerTB": 399,
                     "powerPerController": 2500,
                     "powerJBOD": 2500,
                     "rackController": 2,
                     "rackJBOD": 4
                    },

                  

                    {"diskType":"SAS15K",
                    "size": 0.6,
                    "iops": 175,
                    "usableSize": 0.40176,
                    "formFactor":2.5,
                    "rpm": 15000,
                    "zilGroupsRequired": 1,
                    "ReadCacheRequired": 1,
                    "MetaCacheRequired": 1,
                     "RaidType": "Raidz1-SingleParity(4+1) Typical SAS",
                     "JBODType": 72,
                     "maxNumberofDisksPerCluster": 288,
                     "priceOfController": 10350,
                     "priceOfJBOD": 6000,
                     "priceOfDisk": 386,
                     "pricePerTB": 449,
                     "powerPerController": 2500,
                     "powerJBOD": 2500,
                     "rackController": 2,
                     "rackJBOD": 4
                    },

                     {"diskType":"SSDHighCapacity",
                    "size": 4,
                    "iops": 5000,
                    "usableSize": 2.6784,
                    "formFactor":2.5,
                     "zilGroupsRequired": 0,
                    "ReadCacheRequired": 0,
                    "MetaCacheRequired": 0,
                     "RaidType": "Raidz1-SingleParity(8+1) Typical SSD",
                     "JBODType": 24,
                     "maxNumberofDisksPerCluster": 96,
                     "priceOfController": 10350,
                     "priceOfJBOD": 2200,
                     "priceOfDisk": 3600,
                     "pricePerTB": 799,
                     "powerPerController": 2500,
                     "powerJBOD": 1900,
                     "rackController": 2,
                     "rackJBOD": 2
                     },
                
                {"diskType":"SSDHighPerformance",
                    "size": 2,
                    "iops": 5000,
                    "usableSize": 1.3392,
                    "formFactor":2.5,
                     "zilGroupsRequired": 0,
                    "ReadCacheRequired": 0,
                    "MetaCacheRequired": 0,
                     "RaidType": "Raidz1-SingleParity(8+1) Typical SSD",
                     "JBODType": 24,
                     "maxNumberofDisksPerCluster": 96,
                     "priceOfController": 10350,
                     "priceOfJBOD": 2200,
                     "priceOfDisk": 1800,
                     "pricePerTB": 699,
                     "powerPerController": 2500,
                     "powerJBOD": 1900,
                     "rackController": 2,
                     "rackJBOD": 2
                     },
                
                  {"diskType":"WriteCache",
                    "size": 0.1,
                    "iops": 5000,
                    "usableSize": 0.06696,
                    "formFactor":2.5,
                    "priceOfDisk": 660,
                    
                     },
                {"diskType":"ReadCache",
                    "size": 0.8,
                    "iops": 5000,
                    "usableSize": 0.53568,
                    "formFactor":2.5,
                    "priceOfDisk": 720,
                    
                     },
                
                 {"diskType":"MetaCache",
                    "size": 2,
                    "iops": 5000,
                    "usableSize": 1.3392,
                    "formFactor":2.5,
                    "priceOfDisk": 1800,
                    
                     }     
            ]

    };
        
       


 // standard values
    
    var numberOfZilGroups=2;
    var numberOfCache= 0;
    var numberOfMetaGroups=1;
    var writePercentage=20;
    var cacheHitPercent=50;
    var averageBlockSize=4;

   /* quantity of each unit*/
    var numControllers, numJBODS, numDataDisks, zil, readCache, metaCache, sasCables;
    var totalCost3=0,totalCost5=0;
    var totalHWCost=0,totalSWCost=0,supportSW=0,supportHW=0,costPerGBPerMonth3=0,costPerGBPerMonth5=0;
        
        numControllers=2;
        numJBODS=4;
        numDataDisks=81;
        zil=0;
        readCache=0;
        metaCache=0;
        
    
        
    var customerName, customerContact, DeliveryAddress, description, usableCapcityTB, tier,numberOfSASCables;
       
    tier="SSDHighPerformance";
    usableCapcityTB=100;
    numberOfSASCables=16;
        
    
        function calculatePrice(){
           
          // unit prices 
            var costController, costJBODS, costDataDisks, costZil, costReadCache, costMetaCache, costSASCables,pricepertb;
            costSASCables=100;
            
            for( var i in disks.disk){
               
                if(disks.disk[i].diskType==tier){
                    //alert(disks.disk[i].diskType);
                    costController=disks.disk[i].priceOfController;
                  
                    costJBODS=disks.disk[i].priceOfJBOD;
                    costDataDisks=disks.disk[i].priceOfDisk;
                    costZil=disks.disk[5].priceOfDisk;
                    costReadCache=disks.disk[6].priceOfDisk;
                    costMetaCache=disks.disk[7].priceOfDisk;
                    pricepertb=disks.disk[i].pricePerTB;
                      //alert(disks.disk[i].priceOfJBOD);
                    break;
                    
                }
                
            }
            
            totalHWCost=costController* numControllers+
                        costJBODS* numJBODS+
                        costDataDisks*numDataDisks+
                        costZil*zil+
                        costReadCache*readCache+
                        costMetaCache* metaCache+
                       costSASCables* numberOfSASCables;
            supportHW=0.15* totalHWCost;
            
            totalSWCost=usableCapcityTB* pricepertb;
            supportSW=0.15* totalSWCost;
            
            
            totalCost3=totalHWCost+ totalSWCost+ (totalSWCost*0.15)*2;
            totalCost5=totalHWCost+ (totalHWCost*0.15)*2+totalSWCost+ (totalSWCost*0.15)*4;
            
            costPerGBPerMonth3=totalCost3/(usableCapcityTB*1000*36);
            costPerGBPerMonth5=totalCost5/(usableCapcityTB*1000*60);
            //alert( costPerGBPerMonth5);
                  
            
        };
        
        
  
        
        calculatePrice();
    </script>
    





<div class="container-fluid">
  <h2>Console</h2>
  <p>UI for generating BOM(Billing of Materials) and Price Calcualtion based on Customer Inputs </p>

  <ul class="nav nav-tabs">
    <li><a data-toggle="tab" href="#home">Input Section</a></li>
    <li  class="active"><a data-toggle="tab" href="#menu2">Output section</a></li>
    <li><a data-toggle="tab" href="#menu3">Formulae Sheet</a></li>
  </ul>

  <div class="tab-content">
   
      <div id="home" class="tab-pane fade">
     
           <h3>Input Section</h3>
      <p>Select</p>
                
          
    
    </div>


    <div id="menu2" class="tab-pane fade  in active">
        
        
      <h3>Output section</h3>
      <p id="stdiops"></p>
      <div id="diskParamters"></div>
      <div id="otherinfo"></div>

      <div id="throughputs"></div>
      
        
      

<script>
document.getElementById("stdiops").innerHTML = "Std IOPS=";

  document.getElementById("diskParamters").innerHTML = "Total Number of data disks:"+
                        "<br><br>";

  document.getElementById("otherinfo").innerHTML = "<br>Other Info about IOPS<br><br>StdIOPS with Zil:";

   document.getElementById("throughputs").innerHTML = "<pre><br>Throughputs Table<br><br>Disk:                          IOPS    Throuput (KBPS) Throuput (MBPS)    perTB IOPS<br><br>"+
                            
                             "Disk                           "+"<br>"+
   
                          "</pre>";

   
                                                                                                                       

</script>

        
    </div>



    <div id="menu3" class="tab-pane fade">
      <h3>List of formulae</h3>
        
                <div class="alert alert-success">
                  <strong>Calculation of StdIOPS</strong> <br><br>
                  StdIOPS= Number of usable disks* IOPSperDisk* WritePercentageforStdIOPS
                   <ol>
                     <li>Number of Usable disks= Number of vdevs* Number of data disks</li><br>
                     <li>Number of vdevs= Minimum number of data disks/ Total number of disks</li><br>
                     <li>Minimum number of data disks= Usable Capacity/ Usable Size per disk</li><br>
                     <li>WritePercentageforStdIOPS= Return STDIOPS given WritePercentage</li>

                   </ol>
                </div>
                <div class="alert alert-info">
                 
                 <strong>Calculation of disk paramters</strong> <br><br>
                 
                   <ol>
                     <li>Total number of data disks= Number of vdevs* Total number of disks</li><br>
                     <li>Total number of usable disks= Number of vdevs* Total number of data disks </li><br>
                     <li>Total number of parity disks= Number of vdevs* Total number of parity disks</li><br>
                     <li>Usable capacity (TB)= Total number of data disks* usable size per disk</li><br>
                     <li>Raw capacity= Total number of data disks* capacity per disk(size)</li><br>
                     <li>Number of spares= Total number of disks/ 25</li><br>
                     <li>Total disks= Total number of disks + Number of spares + number of ZIL groups* 2 + number of cache + 
                     number of meta groups * 3</li><br>


                   </ol>


                </div>
                <br>
                
                <div class="alert alert-danger">
                  
                  <strong>Number of JBODS</strong> <br><br>
                 
                   <ol>
                     <li>Number of JBODS( 12 Bay)= Total number of disks/ 12</li><br>
                     <li>Number of JBODS( 24 Bay)= Total number of disks/ 24</li><br>
                     <li>Number of JBODS( 45 Bay)= Total number of disks/ 45</li><br>
                     <li>Number of JBODS( 72 Bay)= Total number of disks/ 72</li><br>
                     <li>Number of JBODS( 90 Bay)= Total number of disks/ 90</li><br>
                     
                   </ol>

                </div>


                <div class="alert alert-info">
                 
                 <strong>Calculation of IOPS with Zil, L2ARC and MetaDev</strong> <br><br>
                 
                   <ol>
                     <li>StdIOPS with Zil= StdIOPS+ (Number of Zil Groups* Zil IOPS)</li><br>
                     <li>StdIOPS with L2ARC= StdIOPS+ (Number of Cache* L2ARC IOPS*Cache Hit Percent)/100</li><br>
                     <li>StdIOPS with MetaDev= StdIOPS+ (Number of MetaDev Groups* MetaDev IOPS)* RaidType</li><br>
                     <li>StdIOPS with Zil, L2ARC and MetaDev= StdIOPS with Zil+ (StdIOPS with L2ARC- StdIOPS)+ (StdIOPS with MetaDev- StdIOPS)   </li><br>
                     


                   </ol>


                </div>
        
        
        <div class="alert alert-success">
                  <strong>Calculation IOPS and throughputs for disks with cache</strong> <br><br>
                  
                   <ol>
                     <li>Disk IOPS= StdIOPS </li><br>
                       <li>Disk with write cache =StdIOPS with Zil </li><br>
                       <li>Disk with read cache =StdIOPS with L2ARC</li><br>
                       <li>Disk with Meta cache =StdIOPS with MetaDev</li><br>
                       <li>Disk with all three cache =StdIOPS with AllThree</li><br>
                       <li>perTBIOPS= IOPS/ Usable Capacity</li><br><br>
                       
                       <li>Throughput (KBps)= IOPS * AverageBlockSize</li><br>
                       <li>Throughput (MBps)= Throughput (KBps)*8/ 1000</li><br>
                       

                   </ol>
                </div>
        
        


             

    </div>
  



</div>

</body>
<!--Created by Deepak Jayaprakash -->
</html>
