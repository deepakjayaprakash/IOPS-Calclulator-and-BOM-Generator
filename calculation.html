<!DOCTYPE html>
<html lang="en">
<head>
  <title>Calculation</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
    
    <script>
    
    
    //raid type and #data disks, 3parity disks and # total disks
    var raids={ "raid" : [
              { "raidType": "Mirror" ,
                "DataDisks": 1,
                "ParityDisks": 2,
                "TotalDisks": 3},
              { "raidType": "Raidz121" ,
                "DataDisks": 2,
                "ParityDisks": 1,
                "TotalDisks": 3}
              ,
               {"raidType": "Raidz141" ,
                "DataDisks": 4,
                "ParityDisks": 1,
                "TotalDisks": 5}
              ,
               {"raidType": "Raidz181" ,
                "DataDisks": 8,
                "ParityDisks": 1,
                "TotalDisks": 9}
              ,
               {"raidType": "Raidz242" ,
                "DataDisks": 4,
                "ParityDisks": 2,
                "TotalDisks": 6}
              ,     
              {"raidType": "Raidz282" ,
                "DataDisks": 8,
                "ParityDisks": 2,
                "TotalDisks": 10}
              ,
              {"raidType": "Raidz383" ,
                "DataDisks": 8,
                "ParityDisks": 3,
                "TotalDisks": 11}
              
            
               ],
               
            
        };


        
       // alert(raid.Mirror.Datadisk);
    
    var disks= {
            "disk": [
                    {"diskType":"nlsas4",
                    "size": 4,
                    "iops": 75,
                    "usableSize": 2.6784,
                    "formFactor":3.5,
                    "rpm": 7200},

                    {"diskType":"nlsas6",
                    "size": 6,
                    "iops": 75,
                    "usableSize": 4.0176,
                    "formFactor":3.5,
                    "rpm": 7200},

                    {"diskType":"nlsas8",
                    "size": 8,
                    "iops": 75,
                    "usableSize": 5.3568,
                    "formFactor":3.5,
                    "rpm": 7200},

                    {"diskType":"sas10kt",
                    "size": 1.8,
                    "iops": 140,
                    "usableSize": 1.20528,
                    "formFactor":2.5,
                    "rpm": 10000},
                    
                    {"diskType":"sas10K1200GB",
                    "size": 1.2,
                    "iops": 140,
                    "usableSize": 0.80352,
                    "formFactor":2.5,
                    "rpm": 10000},

                    {"diskType":"sas10K900GB",
                    "size": 0.9,
                    "iops": 140,
                    "usableSize": 0.60264,
                    "formFactor":2.5,
                    "rpm": 10000},

                    {"diskType":"sas15K600GB",
                    "size": 0.6,
                    "iops": 175,
                    "usableSize": 0.40176,
                    "formFactor":2.5,
                    "rpm": 15000},

                     {"diskType":"ssd2",
                    "size": 2,
                    "iops": 5000,
                    "usableSize": 1.3392,
                    "formFactor":2.5},

                      {"diskType":"ssd4",
                    "size": 4,
                    "iops": 5000,
                    "usableSize": 2.6784,
                    "formFactor":2.5},

                      {"diskType":"ssd800GB",
                    "size": 0.8,
                    "iops": 5000,
                    "usableSize": 0.53568,
                    "formFactor":2.5},

                     {"diskType":"ssdif100",
                    "size": 8,
                    "iops": 10000,
                    "usableSize": 5.3568,
                    "formFactor":2.5},

                     {"diskType":"zil",
                    "size": 0.1,
                    "iops": 5000,
                    "usableSize": 0.06696,
                    "formFactor":2.5},

                    {"diskType":"l2arc",
                    "size": 0.8,
                    "iops": 5000,
                    "usableSize": 0.53568,
                    "formFactor":2.5},

                    {"diskType":"MetaDev",
                    "size": 2,
                    "iops": 5000,
                    "usableSize": 1.3392,
                    "formFactor":2.5},
                        ]

    };


    var writePercentageToStdIOPS=[160,157,154,151,148,145,142,139,136,133,130,127,124,121,118,115,112,109,106,103,100,99.25,98.5,
      97.75,97,96.25,95.5,94.75,94,93.25,92.5,91.75,91,90.25,89.5,88.75,88,87.25,86.5,85.75,85,84.25,83.5,82.75,82,81.25,80.5,79.75,79,78.25,77.5,76.75,76,75.25,74.5,73.75,73,72.25,71.5,70.75,70,69.25,68.5,67.75,67,66.25,65.5,64.75,64,63.25,62.5,61.75,61,60.25,59.5,58.75,58,57.25,56.5,55.75,55,54.25,53.5,52.75,52,51.25,50.5,49.75,49,48.25,47.5,46.75,46,45.25,44.5,43.75,43,42.25,41.5,40,75,40];
   


                      function calculate_IOPS(usableCapacity,diskType1,raidType1, writePercentage){
                       
                        var usableDisks, iopsPerDisk,iops1;
                        var vdevs, dataDisks1, minDataDisks, totalDisks1, usableSize1;
                        for (var i in disks.disk) {
                         // alert(disks.disk[i].diskType);
                          if(disks.disk[i].diskType==diskType1){
                            usableSize1=disks.disk[i].usableSize;
                             iops1=disks.disk[i].iops;
                             break;
                          }
                        }
                                           
                       

                        minDataDisks=usableCapacity / usableSize1;

                         for (var i in raids.raid) {
                         
                          if(raids.raid[i].raidType==raidType1){
                           //alert(raids.raid[i].raidType);
                            totalDisks1=raids.raid[i].TotalDisks;
                            dataDisks1=raids.raid[i].DataDisks;
                            break;
                          }

                        }
                       
                        vdevs=Math.round(minDataDisks/totalDisks1);
                         
                         usableDisks=vdevs* dataDisks1;
                         //alert(usableDisks);

                         var stdIOPS=usableDisks*iops1*writePercentageToStdIOPS[writePercentage]/100;
                         alert(stdIOPS);


                      
                      };
    calculate_IOPS(100,"sas10K1200GB","Raidz141",20); 
    
    </script>
    

<div class="container-fluid">
  <h2>Console</h2>
  <p>UI for generating BOM(Billing of Materials) and Price Calcualtion based on Customer Inputs </p>

  <ul class="nav nav-tabs">
    <li><a data-toggle="tab" href="#home">Dashboard</a></li>
    <li  class="active"><a data-toggle="tab" href="#menu2">Select</a></li>
    <li><a data-toggle="tab" href="#menu3">Bill of Materials</a></li>
    <li><a data-toggle="tab" href="#menu4">Pricing</a></li>
    <li><a data-toggle="tab" href="#menu5">Inventory</a></li>
  </ul>

  <div class="tab-content">
   
      <div id="home" class="tab-pane fade">
     
          
                
          
    
    </div>


    <div id="menu2" class="tab-pane fade  in active">
        
        
      <h3>Select</h3>
      <p>Select</p>
        
        
        
    </div>



    <div id="menu3" class="tab-pane fade">
      <h3>BOM</h3>
      <p>Billing of Materials</p>
    </div>
    <div id="menu4" class="tab-pane fade">
      <h3>Pricing</h3>
      <p>Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
    </div>
<div id="menu5" class="tab-pane fade">
      <h3>Inventory</h3>
     
    
    
    </div>
  </div>
</div>

</body>
</html>
